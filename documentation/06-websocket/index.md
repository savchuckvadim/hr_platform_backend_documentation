# WebSocket Module - –ï–¥–∏–Ω—ã–π WebSocket –º–æ–¥—É–ª—å

## –û–ø–∏—Å–∞–Ω–∏–µ

–ï–¥–∏–Ω—ã–π WebSocket –º–æ–¥—É–ª—å –¥–ª—è –≤—Å–µ—Ö real-time —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–æ–µ–∫—Ç–∞. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–∞—Ç–∞, presence, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –¥—Ä—É–≥–∏—Ö real-time —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏–π–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### üß† –ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø

**WebSocket ‚Äî —ç—Ç–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∞ –Ω–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞.**

Gateway –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç–æ–Ω–∫–∏–º –∏ —Ç–æ–ª—å–∫–æ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ —Å–µ—Ä–≤–∏—Å—ã. –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª—è—Ö (chat, presence).

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–û–¥–∏–Ω Gateway** ‚Äî –Ω–µ –ø–ª–æ–¥–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ gateway –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **Gateway –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –ª–æ–≥–∏–∫–µ** ‚Äî —Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
3. **EventBus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî WebSocket –∏ EventBus —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ listeners
4. **Connection Manager** ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
5. **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã
6. **Multi-node –ø–æ–¥–¥–µ—Ä–∂–∫–∞** ‚Äî Redis adapter –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
7. **–¢–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞** ‚Äî –Ω–µ broadcast –≤—Å–µ–º –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã, —Ç–æ–ª—å–∫–æ –≤ –Ω—É–∂–Ω—ã–µ rooms

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
core/
‚îî‚îÄ‚îÄ websocket/
    ‚îú‚îÄ‚îÄ api/
    ‚îÇ   ‚îî‚îÄ‚îÄ gateway/
    ‚îÇ       ‚îî‚îÄ‚îÄ websocket.gateway.ts      # –ï–¥–∏–Ω—ã–π WebSocket Gateway
    ‚îú‚îÄ‚îÄ application/
    ‚îÇ   ‚îî‚îÄ‚îÄ services/
    ‚îÇ       ‚îî‚îÄ‚îÄ connection-manager.service.ts  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
    ‚îú‚îÄ‚îÄ infrastructure/
    ‚îÇ   ‚îú‚îÄ‚îÄ adapters/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis-io.adapter.ts       # Redis adapter –¥–ª—è multi-node
    ‚îÇ   ‚îú‚îÄ‚îÄ guards/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ws-jwt-auth.guard.ts      # JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è WebSocket
    ‚îÇ   ‚îî‚îÄ‚îÄ interceptors/
    ‚îÇ       ‚îî‚îÄ‚îÄ ws-logging.interceptor.ts # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ WebSocket —Å–æ–±—ã—Ç–∏–π
    ‚îú‚îÄ‚îÄ domain/
    ‚îÇ   ‚îî‚îÄ‚îÄ interfaces/
    ‚îÇ       ‚îî‚îÄ‚îÄ websocket-events.interface.ts  # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–æ–±—ã—Ç–∏–π
    ‚îú‚îÄ‚îÄ websocket.module.ts
    ‚îî‚îÄ‚îÄ index.ts
```

## –ó–∞–¥–∞—á–∏

### ‚úÖ WebSocket Gateway
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [websocket-gateway.md](./websocket-gateway.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ï–¥–∏–Ω—ã–π Gateway —Å event routing –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ —Å–µ—Ä–≤–∏—Å—ã

### ‚úÖ Connection Manager
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [connection-manager.md](./connection-manager.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (multi-device, multi-tab)

### ‚úÖ Event Routing
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [event-routing.md](./event-routing.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–µ—Ä–≤–∏—Å–∞–º

### ‚úÖ Authentication
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [websocket-authentication.md](./websocket-authentication.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### ‚úÖ Multi-node Support
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [multi-node-support.md](./multi-node-support.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: Redis adapter –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

- **–ï–¥–∏–Ω—ã–π Gateway** ‚Äî –æ–¥–∏–Ω WebSocket gateway –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **Event Routing** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø–∞–º (chat, presence)
- **Connection Manager** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **JWT Authentication** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω—ã
- **Redis Adapter** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **Rooms Management** ‚Äî —Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–Ω–∞—Ç—ã
- **EventBus Integration** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Å–æ–±—ã—Ç–∏–π

## –°—Å—ã–ª–∫–∏

- [WebSocket Gateway](./websocket-gateway.md) - –µ–¥–∏–Ω—ã–π Gateway —Å event routing
- [Connection Manager](./connection-manager.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏
- [Event Routing](./event-routing.md) - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- [WebSocket Authentication](./websocket-authentication.md) - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- [Multi-node Support](./multi-node-support.md) - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
