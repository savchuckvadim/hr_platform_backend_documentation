# Authentication Module - –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤—Ö–æ–¥–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏ –¥–ª—è HR Platform. –†–µ–∞–ª–∏–∑—É–µ—Ç multi-device –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å –ø—Ä–∏–≤—è–∑–∫–æ–π refresh —Ç–æ–∫–µ–Ω–æ–≤ –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –∏ role context, –ø–æ–∑–≤–æ–ª—è—è –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª—è—Ö –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

## –ó–∞–¥–∞—á–∏

### ‚úÖ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [concept.md](./concept.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### ‚úÖ Database Models
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [database-models.md](./database-models.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ú–æ–¥–µ–ª–∏ –ë–î –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (User, RoleContext, Company, Token)

### ‚úÖ Passport Strategies
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [passport-strategies.md](./passport-strategies.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: JWT –∏ Refresh —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ Passport

### ‚úÖ Guards –∏ Decorators
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [guards-decorators.md](./guards-decorators.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: Guards, decorators, enums –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### ‚úÖ Registration Flow
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [registration-flow.md](./registration-flow.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ—Ç–æ–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –∏ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è

### ‚úÖ Login –∏ Refresh Flow
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [login-refresh-flow.md](./login-refresh-flow.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ—Ç–æ–∫–∏ –≤—Ö–æ–¥–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, logout

### ‚úÖ Password Recovery Flow
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [password-recovery-flow.md](./password-recovery-flow.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ—Ç–æ–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ email

### ‚úÖ Token Management
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [token-management.md](./token-management.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏, cron –æ—á–∏—Å—Ç–∫–∞, sliding session

### ‚úÖ HR Roles Guard
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª**: [hr-roles-guard.md](./hr-roles-guard.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π (HR vs HR_ADMIN)

### üìã Future Extensions
**–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
**–§–∞–π–ª**: [future-extensions.md](./future-extensions.md)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (OAuth, Phone OTP, 2FA, WebAuthn)

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

- **Multi-device**: –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **Multi-role**: –û–¥–∏–Ω email –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å
- **Role Context**: –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–æ–ª–∏ (CANDIDATE, EMPLOYER, ADMIN)
- **Device-bound tokens**: Refresh token –ø—Ä–∏–≤—è–∑–∞–Ω –∫ (userId + roleContextId + deviceId)
- **Sliding session**: Access token –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Stateful refresh**: Refresh —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –≤ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- **Stateless access**: Access —Ç–æ–∫–µ–Ω—ã - JWT –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
auth/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îÇ       ‚îú‚îÄ‚îÄ register-candidate.dto.ts
‚îÇ       ‚îú‚îÄ‚îÄ register-employer.dto.ts
‚îÇ       ‚îú‚îÄ‚îÄ login.dto.ts
‚îÇ       ‚îú‚îÄ‚îÄ refresh.dto.ts
‚îÇ       ‚îú‚îÄ‚îÄ forgot-password.dto.ts
‚îÇ       ‚îî‚îÄ‚îÄ reset-password.dto.ts
‚îú‚îÄ‚îÄ application/
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îî‚îÄ‚îÄ auth.service.ts
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ role-context.entity.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ token.entity.ts
‚îÇ   ‚îî‚îÄ‚îÄ interfaces/
‚îÇ       ‚îî‚îÄ‚îÄ jwt-payload.interface.ts
‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.strategy.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ refresh.strategy.ts
‚îÇ   ‚îú‚îÄ‚îÄ guards/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt-auth.guard.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ refresh-auth.guard.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ roles.guard.ts
‚îÇ   ‚îú‚îÄ‚îÄ decorators/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ current-user.decorator.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ current-role.decorator.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ roles.decorator.ts
‚îÇ   ‚îú‚îÄ‚îÄ interceptors/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ token-refresh.interceptor.ts
‚îÇ   ‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ password-reset-token.repository.ts
‚îÇ   ‚îî‚îÄ‚îÄ cron/
‚îÇ       ‚îî‚îÄ‚îÄ password-reset-cleanup.cron.ts
‚îú‚îÄ‚îÄ enums/
‚îÇ   ‚îî‚îÄ‚îÄ auth-status.enum.ts
‚îú‚îÄ‚îÄ __tests__/
‚îú‚îÄ‚îÄ auth.module.ts
‚îî‚îÄ‚îÄ index.ts
```

## –°—Å—ã–ª–∫–∏

- [–ö–æ–Ω—Ü–µ–ø—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](./concept.md) - –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [–ú–æ–¥–µ–ª–∏ –ë–î](./database-models.md) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [Passport —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏](./passport-strategies.md) - JWT –∏ Refresh —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- [Guards –∏ Decorators](./guards-decorators.md) - –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- [Employer Roles Guard](./hr-roles-guard.md) - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π (HR vs HR_ADMIN)
- [–ü–æ—Ç–æ–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏](./registration-flow.md) - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞, —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è –∏ HR
- [–ü–æ—Ç–æ–∫–∏ –≤—Ö–æ–¥–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](./login-refresh-flow.md) - login, refresh, logout
- [–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è](./password-recovery-flow.md) - forgot-password, reset-password
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏](./token-management.md) - cron, sliding session
- [–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è](./future-extensions.md) - OAuth, Phone OTP, 2FA, WebAuthn
